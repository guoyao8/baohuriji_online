import{u,j as e}from"./index-Ddi_foy2.js";import{u as g,r as l}from"./react-vendor-CA3giask.js";import{A as b}from"./AvatarUpload-KnpHRixg.js";import"./store-DH4KNu1b.js";import"./http-B9ygI19o.js";import"./date-utils-BxdteZ_p.js";function y(){const s=g(),{user:t,updateProfile:o}=u(),[r,x]=l.useState((t==null?void 0:t.username)||""),[n,m]=l.useState((t==null?void 0:t.avatarUrl)||""),[i,d]=l.useState(!1),h=async()=>{var a,c;if(!r.trim()){alert("请输入用户名");return}d(!0);try{await o({avatarUrl:n}),alert("保存成功"),s(-1)}catch(p){alert(((c=(a=p.response)==null?void 0:a.data)==null?void 0:c.error)||"保存失败，请重试")}finally{d(!1)}};return e.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark font-display group/design-root overflow-x-hidden",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between bg-background-light/80 dark:bg-background-dark/80 px-4 pt-4 pb-3 backdrop-blur-sm",children:[e.jsx("button",{onClick:()=>s(-1),className:"flex h-10 w-10 items-center justify-center rounded-full text-slate-600 dark:text-slate-300",children:e.jsx("span",{className:"material-symbols-outlined text-3xl",children:"arrow_back_ios_new"})}),e.jsx("h1",{className:"text-slate-900 dark:text-slate-50 text-2xl font-bold leading-tight tracking-[-0.015em] flex-1 text-center",children:"账户设置"}),e.jsx("div",{className:"w-10"})]}),e.jsx("div",{className:"flex flex-col items-center gap-8 p-4",children:e.jsx(b,{currentAvatar:n,onAvatarChange:m,size:"lg"})}),e.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.jsxs("div",{className:"flex flex-col rounded-xl bg-white dark:bg-slate-800/50 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 border-b border-slate-200 dark:border-slate-700 px-4 py-3",children:[e.jsx("label",{className:"w-20 text-slate-700 dark:text-slate-300",htmlFor:"username",children:"用户名"}),e.jsx("input",{className:"flex-1 border-none bg-transparent p-0 text-slate-900 dark:text-slate-50 placeholder-slate-400 focus:ring-0",id:"username",placeholder:"请输入用户名",type:"text",value:r,onChange:a=>x(a.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-4 px-4 py-3",children:[e.jsx("label",{className:"w-20 text-slate-700 dark:text-slate-300",children:"注册时间"}),e.jsx("p",{className:"flex-1 text-slate-500 dark:text-slate-400",children:t!=null&&t.createdAt?new Date(t.createdAt).toLocaleDateString("zh-CN"):""})]})]}),e.jsx("div",{className:"flex flex-col rounded-xl bg-white dark:bg-slate-800/50 shadow-sm",children:e.jsxs("button",{onClick:()=>s("/change-password"),className:"flex items-center gap-4 px-4 min-h-[56px] justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-slate-700 dark:text-slate-200 flex items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-700 shrink-0 size-10",children:e.jsx("span",{className:"material-symbols-outlined",children:"lock"})}),e.jsx("p",{className:"text-slate-900 dark:text-slate-50 text-base font-normal leading-normal flex-1 truncate",children:"修改密码"})]}),e.jsx("div",{className:"shrink-0",children:e.jsx("span",{className:"material-symbols-outlined text-slate-400 dark:text-slate-500",children:"chevron_right"})})]})})]}),e.jsx("div",{className:"mt-auto px-4 pt-8 pb-8",children:e.jsx("button",{onClick:h,disabled:i,className:"w-full rounded-full bg-primary py-3.5 text-lg font-bold text-white shadow-lg shadow-primary/20 hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"保存中...":"保存"})})]})}export{y as default};
